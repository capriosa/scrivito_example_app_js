jQuery(function(e){var t=function(){var t=("https:"==location.protocol?"https:":"http:")+"//formoid.net/api/push",i=function(){var t=(/MSIE (\d+)\./.exec(navigator.userAgent)||[0,0])[1];return 8==t||9==t&&"file:"!=location.protocol?function(t,i){var n=new XDomainRequest,o=e.Deferred();return n.open(i.type,t),n.onload=function(){o.resolve(this.responseText)},n.onerror=function(){o.reject()},n.send(i.data),o}:(e.support.cors=!0,e.ajax)}(),n=function(e,t){return e="__"+e+"__",t.length?(this[e]=t[0],this):this[e]},o=function(t,i,n){return e.each(n,function(e,n){t[n]=function(){return i[n].apply(i,arguments)}}),t},r=function(e){e=e||{},this.__email__=e.email||"",this.__title__=e.title||"",this.__data__=e.data||[]};return r.prototype.email=function(){return n.call(this,"email",arguments)},r.prototype.title=function(){return n.call(this,"title",arguments)},r.prototype.data=function(){return n.call(this,"data",arguments)},r.prototype.send=function(n,r){var s=o(e.Deferred(),this,["email","title","data","send"]);return r&&(r.call(this,s),"pending"!=s.state())?s:(i(t,{type:"POST",data:JSON.stringify({email:this.__email__,form:{title:this.__title__,data:arguments.length?n:this.__data__}})}).done(function(e){try{var t=JSON.parse(e);t.error?s.reject(t.error):s.resolve(t.response)}catch(i){s.reject("Incorrect server response.")}}).fail(function(){var e="Failed to query the server. ";e+="onLine"in navigator&&!navigator.onLine?"No connection to the Internet.":"Check the connection and try again.",s.reject(e)}),s)},{Form:function(e){return new r(e)}}}(),i=function(t){if(t.checkValidity)return t.checkValidity();var i=!0,n=e(t).val(),o=e(t).attr("type");return n?i=!("email"===o&&!/^([^@]+?)@(([a-z0-9]-*)*[a-z0-9]+\.)+([a-z0-9]+)$/i.test(n)):e(t).attr("required")&&(i=!1),e(t)[(i?"remove":"add")+"Class"]("form-invalid"),i};e('[data-form-type="formoid"]').each(function(){var n,o=e(this),r=o.is("form")?o:o.find("form"),s=o.find("[data-form-alert]"),a=o.is("[data-form-title]")?o:o.find("[data-form-title]"),l=o.find('[type="submit"]'),c=s.attr("data-success")||s.find("[data-form-alert-success]").html();l.html('<span class="btn-text">'+l.html()+'</span><i class="btn-loader"></i>').click(function(){r.addClass("form-active")}),r.submit(function(u){if(u.preventDefault(),r.addClass("form-active"),!l.hasClass("btn-loading")){var d=!0,h=[];n=n||t.Form({email:o.find("[data-form-email]").val(),title:a.attr("data-form-title")||a.text()}),s.html(""),o.find("[data-form-field]").each(function(){i(this)||(d=!1),h.push([e(this).attr("data-form-field")||e(this).attr("name"),e(this).val()])}),d&&(l.addClass("btn-loading").prop("disabled",!0),n.send(h).done(function(t){r.removeClass("form-active"),o.find("[data-form-field]").val(""),s.append(e('<div class="alert alert-form alert-success text-xs-center"/>').text(c||t))}).fail(function(t){s.append(e('<div class="alert alert-form alert-danger text-xs-center"/>').text(t))}).always(function(){l.removeClass("btn-loading").prop("disabled",!1)}))}})})});